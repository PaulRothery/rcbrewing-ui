<p-button label="Back to Main Menu" icon="pi pi-arrow-left" iconPos="left" size="small"
  class="mb-3" severity="secondary"
  [routerLink]="['/main-menu']">
</p-button>

<h2>Yeast</h2>

<a routerLink="/yeast-edit" pButton style="float: right; margin-right: 50px;">
  <span pButtonLabel>Add</span>
</a>


@if (loading) {
<div>
  <p>Loading yeasts...</p>
</div>
}
<br>


<div style="display: flex;">
  <div class="table-container" style="margin-left: 50px; font-weight: bold;">

    <p-table [value]="(yeasts$ | async) ?? []" showGridlines stripedRows>

      <ng-template #header>
        <tr>
          <th pSortableColumn="strain">Strain <p-sortIcon field="strain"></p-sortIcon></th>
          <th pSortableColumn="date">Date <p-sortIcon field="date"></p-sortIcon></th>
          <th pSortableColumn="brand">Brand <p-sortIcon field="brand"></p-sortIcon></th>

          <th pSortableColumn="supplier">Supplier <p-sortIcon field="supplier"></p-sortIcon></th>
          <th pSortableColumn="lotNunber">Lot Number <p-sortIcon field="lotNunber"></p-sortIcon></th>
          <th pSortableColumn="previousBatchId">Previous<br> Batch Id <p-sortIcon field="previousBatchId"></p-sortIcon>
          </th>
          <th pSortableColumn="previousBatchBrand">Previous<br> Batch Brand <p-sortIcon
              field="previousBatchBrand"></p-sortIcon></th>
          <th pSortableColumn="generation">Generation <p-sortIcon field="generation"></p-sortIcon></th>
          <th pSortableColumn="cellCount">Cell Count <p-sortIcon field="cellCount"></p-sortIcon></th>
          <th pSortableColumn="viability">Viability <p-sortIcon field="viability"></p-sortIcon></th>
        </tr>
      </ng-template>

      <ng-template let-yeast pTemplate="body">
        <tr [pSelectableRow]="yeast">

          <td>{{ yeast.strain }}</td>
          <td>{{ yeast.date | date:'yyyy-MM-dd' }}</td>
          <td>{{ yeast.brand }}</td>
          <td>{{ yeast.supplier }}</td>

          <td>{{ yeast.lotNumber}}</td>

          <td>{{ yeast.previousBatchId }}</td>
          <td>{{ yeast.previousBatchBrand }}</td>


          <td>{{ yeast.generation }}</td>
          <td>{{ yeast.cellCount }}</td>
          <td>{{ yeast.viability }}</td>


          <p-button icon="pi pi-pencil" severity="info" (click)="editYeast(yeast)"></p-button>
          <p-button icon="pi pi-trash" severity="info" (click)="deleteYeast(yeast.id)"></p-button>

        </tr>
      </ng-template>
    </p-table>

  </div>
</div>

<a routerLink="/yeast-edit" pButton style="float: right; margin-right: 50px;">
  <span pButtonLabel>Add</span>
</a>